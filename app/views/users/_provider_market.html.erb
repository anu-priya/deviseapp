<link rel="stylesheet" type="text/css" href="/assets/register_new/register_pop.css" />
<link rel="stylesheet" type="text/css" href="/assets/register_new/provider_register_pop.css" />
<!--avoid to type text in browse textbox-->
<script type="text/javascript">
  $(document).ready(function(){
    $("#browse_photo").keyup(function(){
      var browse_photo=$("#browse_photo").val();
      $("#browse_photo").val("");
    });
  });

  $(document).ready(function(){
    $("#browse_photo").keydown(function(){
      var browse_photo=$("#browse_photo").val();
      $("#browse_photo").val("");
    });
  });
  
  

  $(document).ready(function(){
    document.getElementById("b_name").focus();

  });
  
  //set automatically go to next textbox
  function movetoNext(current, nextFieldID) {

    if (current.value.length >= current.maxLength) {
      document.getElementById(nextFieldID).focus();
    }
    return true;
  }
  // allow numbers only
function number(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57 ) && (charCode != 46 ) ){
        //alert("Allow only Numbers");
        return false;			
    }
    return true;
}
</script>
<style type="text/css">
	#register_outerContainer .checkboxCont a:hover{
		text-decoration:underline;
		color:#307193;
	}
</style>

<script type="text/javascript" src="/assets/register/provider_register_update_pop.js"></script>
<script type="text/javascript" src="/assets/jquery.form.js"></script>
<div align="center" style="border-bottom:1px solid #ddebee;">
  <div style="margin:10px 0 10px 0;">
    <a href="#" class="menuText" title="" onclick="show_parent_register(); _gaq.push(['_trackEvent', 'Registration', 'clickParentRegistration']);">Parent</a>
    <span class="dot menuText">&bull;</span>
    <a href="#" class="menuText" title="" onclick="show_provider_plan(); _gaq.push(['_trackEvent', 'Registration', 'clickProviderSignup']);" style="color:#fe0003;"><b>Provider</b></a>
  </div>
</div>

<div id="register_outerContainer">
  <div class="Provider_innerContainer" style="width:870px;">
    <div id="signupDiv" style="padding-bottom:10px;">
      <div class="setTopPosition">
        <div class="lt" id="setImage"></div>
        <div class="lt"><a href="javascript:void(0)" title=""><img src="/assets/provider_register/step_1active.png" id="img1" align="top" class="circleNumber"></a></div>
        <div class="lt" id="setImage1"></div>
        <div class="lt"><a href="javascript:void(0)" title=""><img src="/assets/provider_register/step_2inactive.png" id="img2_act" align="top" class="circleNumber"></a></div>
        <div class="lt" id="setImage2"></div>
        <div class="lt"><a href="javascript:void(0)" title=""><img src="/assets/provider_register/step_3active.png" id="img3_act" align="top" class="circleNumber"></a></div>
        <div class="lt" id="setImage"></div>
        <div class="clear"></div>
        <div style="margin-top:3px;">
          <div class="lt setfont12" id="choose_text" style="font-weight:normal;">Choose Plan</div>
          <div class="lt setfont12" id="plan_text" style="font-weight:bold;"><span id="up">Set up Profile</span></div>
          <div class="lt setfont12" id="payment_text" style="font-weight:normal;padding-left: 72px; width: 135px;text-align: center"><span id="add">Add Payment Details</span></div>
          <div class="clear"></div>
        </div>
      </div>
    </div>
    
    
    <div class="ProviderCenterContent" id="provider_market" style="margin-bottom:0px; background:none;">
      <!-- <div align="center" class="setfeedbackDiv" style="width:325px; font-weight:bold;"><span class="required">*</span>&nbsp;Please fill out required fields.</div>-->
      <div class="innerMarketDiv" style="padding: 0px 10px 0 5px; width:870px;">

        <form id="provider_market_sub" name="provider_market" action="/provider_submit" method="post" enctype="multipart/form-data">
           <input type="hidden" name="curated_user" id="curated_user" value="" />
	   <div id="market_second" style="display:block;">
          <div>
            <div class="lt" style="width: 426px; margin-left:18px;">
              <div id="user_name_wrong" style="display: none;color: #FC8989;font-size: 12px; .margin:10px 0 10px 16px;"></div>
              <p class="head" style="color:#186171;">Register</p>
              <div class="marginTop14_provider">
                <div class="lt leftSideField">Business Name<span class="required">*</span></div>
		<input type="text" name="b_name" id="b_name" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.business_name.nil? %><%=current_user.user_profile.business_name%><%else%>Enter the name of your business<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter the name of your business'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter the name of your business'}" tabindex="1" maxlength="50">
	          <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="b_name_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop15">
                <div class="lt leftSideField">Password<span class="required">*</span></div>
                <input type="password" name="p_password" id="p_password" value="<% if !current_user.nil? && !current_user.user_password.nil? %><%= Base64.decode64("#{current_user.user_password}")%><%else%>password<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'password'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='password'}" tabindex="3">
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_password_error" style="width:281px;"></div>
              </div>
              <div class="clear"></div>

              <div class="marginTop15">
                <div class="lt leftSideField">Contact Name<span class="required">*</span></div>
                 <input type="text" name="p_name" id="p_name" value="<% if !current_user.nil? && !current_user.user_name.nil? %><%=current_user.user_name%><%else%>Eg: John Smith<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Eg: John Smith'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Eg: John Smith'}" tabindex="5" maxlength="25">
		<div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_name_error"></div>
              </div>
              <div class="clear"></div>


              <!--div class="marginTop15" >
                <div class="lt leftSideField">Owner</div>   

                <input type="text" name="p_owner_firstname" id="p_owner_firstname" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.owner_first_name.nil? %><%=current_user.user_profile.owner_first_name%><%else%>First name<% end %>" class="lt textbox_ownerprovider" style="outline:none;" onfocus="if(this.value == 'First name'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='First name'}" tabindex="7" maxlength="25">

                <input type="text" name="p_owner_lastname" id="p_owner_lastname" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.owner_last_name.nil? %><%=current_user.user_profile.owner_last_name%><%else%>Last name<% end %>" class="lt textbox_ownerprovider" style="outline:none; margin-left:5px;" onfocus="if(this.value == 'Last name'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Last name'}" tabindex="8" maxlength="25">
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_owner_firstname_error" style="display: inline-block; float: left;width: 124px;"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt" id="p_owner_lastname_error" style="display: inline-block; float: right; margin-right:15px;width: 138px;"></div>
                <div class="lt" style="margin-left: 8px;"></div> 
              </div--> 
              <div class="clear"></div>

            </div> 


            <div class="lt" style="width: 413px; padding: 20px 0 0 0px;">
              <div class="marginTop15" style="width:442px;">
                <div class="lt leftSideField">Email<span class="required">*</span></div>
                <% if !current_user.nil? && !current_user.email_address.nil? %>
                  <input type="text" name="p_email" disabled="disabled" id="p_email" value="<% if !current_user.nil? && !current_user.email_address.nil? %><%=current_user.email_address%><%else%>Eg:john@gmail.com<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Eg:john@gmail.com'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Eg:john@gmail.com'}" tabindex="2" >
                <%else %>
                  <input type="text" name="p_email" id="p_email" value="<% if !current_user.nil? && !current_user.email_address.nil? %><%=current_user.email_address%><% elsif(!@invitee_user_email.nil? && !@invitee_user_email.empty? )%><%=@invitee_user_email%><%else%>Eg:john@gmail.com<% end %>" class="lt textbox_provider_free" style="outline:none;<%=(!@invitee_user_email.nil? && !@invitee_user_email.empty? ) ? "color:rgb(68, 68, 68);" : ""%>" onfocus="if(this.value == 'Eg:john@gmail.com'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Eg:john@gmail.com'}" tabindex="2" >
                <%end %>
                <!--<input type="text" name="p_email" id="p_email" value="Eg:john@gmail.com" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Eg:john@gmail.com'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Eg:john@gmail.com'}" tabindex="2" >-->
                <div class="clear"></div>
              </div>

              <div id="error_explanation" class="errorDiv" style="display:none;">
                <div class="lt leftSideField">&nbsp;</div>

                <div class ="setStyleEmail"></div>

              </div>

              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_email_error"></div>    
              </div>
              <div class="clear"></div>

              <div class="marginTop15" style="width:442px;">
                <div class="lt leftSideField">Confirm Password<span class="required">*</span></div>
                <input type="password" name="p_confirm_password" id="p_confirm_password" value="<% if !current_user.nil? && !current_user.user_password.nil? %><%=current_user.user_password%><%else%>password<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'password'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='password'}" tabindex="4" >
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_confirm_password_error"></div>
              </div>
              <div class="clear"></div>

              <div class="marginTop14" style="width:442px;">
                <div class="lt leftSideField">Business Logo</div>
<%# if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.profile_file_name.nil? %>
<%#= image_tag(current_user.user_profile.profile.url(:small), :width => '21', :height => '21') %>  
<%#end%>
		<div>
			<div class="file_hidden_reg">
				<input type="text" name="browse_photo" id="browse_photo" class="file_input_reg" readonly="readonly" />
			</div>
			<div class="file_upload">
				<input type="file" name="activity_image" id="photo" accept="image/*" size="21" onChange="document.getElementById('browse_photo').value =this.value;fakepath(this.value);" tabindex="6" />
			</div>  
		</div>
		<!--<div class="lt FileUpload">
			<input type="file" accept="image/*" onchange="document.getElementById('browse_photo').value =this.value;fakepath(this.value);" size="21" id="photo" class="BrowserHidden" name="activity_image">
			<div class="BrowserVisible" style="border:none;">
				<input type="text" name="browse_photo" id="browse_photo" class="FileField" tabindex="6" />
			</div>
			<span class="browse"><img src="/assets/register/browse.png" width="76" height="30" /></span>
			<div class="clear"></div>
		</div>-->
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="b_logo_error"></div>
              </div>
              <p class="msg" style=" color: #FC8989; font-size: 12px;  font-weight: normal;margin-left: 135px;"></p>
              <div class="clear"></div>


              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_admin_firstname_error" style="display: inline-block; float: left; width: 150px;"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt" id="p_admin_lastname_error" style="display: inline-block; float: right; margin-right:8px;width: 150px;"></div>
                <div class="lt" style="margin-left: 8px;"></div>
              </div>
              <div class="clear"></div>

              <div class="errorDiv" style="display:none">
                <div class="lt errorDivProvider" id="admin_provider_error" style="margin-left: 160px;"></div>
              </div>
              <div class="clear"></div>

            </div>
            <div class="clear"></div>

          </div>
          <div>
            <div class="lt" style="width: 416px;  margin-top: -7px; margin-left:18px;"> 
              <p class="head" style="margin: 20px 0 0 0; color:#186171;">Address</p>
              <div class="marginTop14">

                <div class="lt leftSideField">Address Line 1<span class="required">*</span></div>
                <input type="text" name="address1" id="address1" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.address_1.nil? %><%=current_user.user_profile.address_1%><%else%>Enter address<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter address'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter address'}" tabindex="9" maxlength="50" >
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="address1_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop14">
                <div class="lt leftSideField">Country<span class="required">*</span></div>
                <div class="lt customCity">
		<select name="country" id="p_country" size="1" tabindex="11" class="drop_down_left">
			<option value="United States">United States</option>
		</select>
                </div>
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_country_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop14" id="city_height">
                <div class="lt leftSideField">City<span class="required">*</span></div>
                <div class="lt customCity">
			<input type="hidden" id="old" name="old" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.city.nil? %><%=current_user.user_profile.city%><%else%><%= @city %><% end %>"/>
                   <select name="city" id="p_city" tabindex="13"  class="drop_down_left">
			<%@cities = City.where("state_id = 1 and country_id = 1").order("city_name Asc")%>			
			<%@cities.each do |cit|%>
				<option value="<%= cit.city_name %>"><%= cit.city_name %></option>
			 <%end%>
		</select>                  
                </div>
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none" id="cityError">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_city_error"></div>
              </div>
              <div class="clear"></div>


              <div class="marginTop14" style="display:none">
                <div class="lt leftSideField">Time Zone</div>
                <div class="lt customCity">
		<select name="time" id="p_time" size="1" class="drop_down_left">
			<!--<option value="Pacific Time Zone">Pacific Time Zone</option>-->
		</select>                    
                </div>
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_time_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop15">
	      
	      <div class="lt leftSideField">Phone<span class="required">*</span></div>
                
                  <input type="text" name="p_phone_1" id="p_phone_1" value="xxx" class="lt textbox_card" style="outline:none; margin-right:10px;" onfocus="if(this.value == 'xxx'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='xxx'}" tabindex="15" maxlength="3"  onkeyup="movetoNext(this, 'p_phone_2',event);" onKeyPress="return number(event);"/>

                  <div class="lt setHyphen">-</div>

                  <input type="text" name="p_phone_2" id="p_phone_2" value="xxx" class="lt textbox_card" style="outline:none; margin:0px 10px; 0px 10px" onfocus="if(this.value == 'xxx'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='xxx'}" tabindex="16" maxlength="3"  onkeyup="return movetoNext(this, 'p_phone_3',event)" onKeyPress="return number(event);"/>

                  <div class="lt setHyphen">-</div>

                   <input type="text" name="p_phone_3" id="p_phone_3" value="xxxx" class="lt textbox_card" style="outline:none; margin-left:10px;" onfocus="if(this.value == 'xxxx'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='xxxx'}" tabindex="17" maxlength="4" onKeyPress="return number(event);"/>
	
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField" style="width:133px;">&nbsp;</div>
                <div class="lt" id="p_phone_error" style="width:281px;"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop15">
                <div class="lt leftSideField">Web Address</div>
                <input type="text" name="web_addrs" id="web_addrs" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.website.nil? %><%=current_user.user_profile.website%><%else%>Enter the URL of your website<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter the URL of your website'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter the URL of your website'}" tabindex="21" maxlength="50" >
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="web_addrs_error"></div>
              </div>
              <div class="clear"></div>
              <!--div class="marginTop12">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt">
                  <input type="hidden" name="agree_provider" id="agree_provider" value="7" />
                  <span  class="checkbox">
                    <a href="javascript:void(0)" title="" class="checkbox" id="p_checkbox_selected" onclick="dispCheckboxImg('p_checkbox_selected')" onkeydown="ag_cb_keydown(event,'p_checkbox_selected')" style="display: none" tabindex="23"><img src="/assets/register/checkbox_selected.png" alt=""/></a>
                    <a href="javascript:void(0)" title="" id="p_checkbox_normal" onclick="dispCheckboxImg('p_checkbox_normal')" onkeydown="ag_cb_keydown(event,'p_checkbox_normal')" tabindex="23"><img src="/assets/register/checkbox_normal.png" alt=""/></a>
                    <a href="javascript:void(0)" title="" id="p_checkbox_error" onclick="dispCheckboxImg('p_checkbox_error')" onkeydown="ag_cb_keydown(event,'p_checkbox_error')"  tabindex="23" style="display: none"><img src="/assets/register/checkbox_error.png" alt=""/></a>
                  </span>
                  <p class="lt checkboxCont">I agree to the <a href="provider_terms_of_service" onkeydown="termsKeyDown(event)" title="" tabindex="24" target="_blank">Famtivity Terms of Service</a> <span style="color: #307193;">&amp;</span> <a href="provider_privacy_policy" onkeydown="termsKeyDown(event)" title="" tabindex="25" target="_blank">Privacy Policies</a></p>
                  <div class="clear"></div>
                </div>
                <div class="clear"></div>
              </div>
              <div class="clear"></div>

              <div class="errorDiv" style="display:none">
                <div class="lt errorDivProvider" id="agree_provider_error" style="margin-left: 160px;"></div>
              </div>
              <div class="clear"></div-->
              <div class="paddingTop20">
                <div class="lt leftSideField" style="width:132px;">&nbsp;</div>
                <div style="width: 400px;*margin:-20px 0 0 131px; position: relative;">
		<a onclick="return validate_market();_gaq.push(['_trackEvent', 'Registration', 'clickProviderMarketRegister', 'Market Registration']);" height="33" width="95" title="Register" tabindex="26" class="lt loginButton" href="javascript:void(0)"><img class="lt" alt="" src="/assets/register/next_button.png"></a>
		<div class="cancel"><a href="javascript:void(0)" title="" tabindex="27" style="position:relative;display:inline-block;" onclick="closepopup()"><img src="/assets/login/cancel_button.png" width="97" height="37" alt="" class="lt" /></a></div>
                  <div class="clear"></div>
                </div>
                <div class="clear"></div>
              </div>
              <div class="marginTop14">
                <div class="lt leftSideField">&nbsp;</div>
                <p class="alreadyText">Already have an account?  <a href="javascript:void(0)" title="" style="padding-left:5px;" tabindex="28" onclick="parent.parentLoginPage.hide(); parent.pop_Login('/login'); _gaq.push(['_trackEvent', 'Login', 'clickLogin']);">Login</a></p>
                <div class="clear"></div>
              </div>


            </div>
            <div class="lt" style="width: 418px; margin-top: -24px; margin-left:10px;">
              <p class="head" style="margin-top: 20px;">&nbsp;</p>
              <div class="marginTop15" style="width: 442px;">
                <div class="lt leftSideField">Address Line 2</div>
                <input type="text" name="address2" id="address2" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.address_2.nil? %><%=current_user.user_profile.address_2%><%else%>Enter address<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter address'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter address'}" tabindex="10" maxlength="50" >
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none;">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="address2_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop14" style="width: 443px;">
                <div class="lt leftSideField">State<span class="required">*</span></div>
                <div class="lt customCity">
		<select name="state" id="p_state" size="1" tabindex="12"  class="drop_down_left">
			<option value="California">California</option>
		</select>
                </div>
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_state_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop14" style="width: 442px;">
                <div class="lt leftSideField">Zip Code<span class="required">*</span></div>
                <input type="text" name="p_zipcode" id="p_zipcode" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.zip_code.nil? %><%=current_user.user_profile.zip_code%><%else%>Enter zip code<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter zip code'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter zip code'}" tabindex="14" maxlength="50" >
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_zipcode_error"></div>
              </div>
              <div class="clear"></div>
              <div class="marginTop15" style="width: 442px;">
		  <div class="lt leftSideField">Mobile</div>
                <!--<input type="text" name="p_mobile" id="p_mobile" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.mobile.nil? %><%=current_user.user_profile.mobile%><%else%>Enter your mobile number<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter your mobile number'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter your mobile number'}" tabindex="19" maxlength="50" >
	       -->
	        <input type="text" name="p_mobile_1" id="p_mobile_1" value="xxx" class="lt textbox_card" style="outline:none; margin-right:10px;" onfocus="if(this.value == 'xxx'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='xxx'}" tabindex="18" maxlength="3" onkeyup="movetoNext(this, 'p_mobile_2',event);" onKeyPress="return number(event);"/>

                  <div class="lt setHyphen">-</div>

                  <input type="text" name="p_mobile_2" id="p_mobile_2" value="xxx" class="lt textbox_card" style="outline:none; margin:0px 10px; 0px 10px" onfocus="if(this.value == 'xxx'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='xxx'}" tabindex="19" maxlength="3"  onkeyup="return movetoNext(this, 'p_mobile_3',event)" onKeyPress="return number(event);"/>

                  <div class="lt setHyphen">-</div>

                   <input type="text" name="p_mobile_3" id="p_mobile_3" value="xxxx" class="lt textbox_card" style="outline:none; margin-left:10px;" onfocus="if(this.value == 'xxxx'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='xxxx'}" tabindex="20" maxlength="4" onKeyPress="return number(event);"/>

                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField" style="width:133px;">&nbsp;</div>
                <div class="lt" id="p_mobile_error" style="width:281px;"></div>
              </div>

              <div class="clear"></div>
              <div class="marginTop15" style="width: 442px;">
                <div class="lt leftSideField">Fax</div>
                <input type="text" name="p_fax" id="p_fax" value="<% if !current_user.nil? && !current_user.user_profile.nil? && !current_user.user_profile.fax.nil? %><%=current_user.user_profile.fax%><%else%>Enter your fax number<% end %>" class="lt textbox_provider_free" style="outline:none;" onfocus="if(this.value == 'Enter your fax number'){this.value=''; this.style.color='#444444'; this.style.border='1px solid #9fd8eb';}"  onblur="if (this.value == '') {this.style.color='#999999'; this.style.border='1px solid #BDD6DD';this.value='Enter your fax number'}" tabindex="22" maxlength="50" >
                <div class="clear"></div>
              </div>
              <div class="errorDiv" style="display:none">
                <div class="lt leftSideField">&nbsp;</div>
                <div class="lt" id="p_fax_error"></div>
              </div>
              <div class="clear"></div>
            </div>
          </div>
    <input type="hidden" name="aten_mail" id="aten_mail" value="<%=@aten_mail if @aten_mail%>" />
	  <input type="hidden" name="imanager" id="imanager" value="<%=@imanager if @imanager%>" />
	  <input type="hidden" name="invite_user_id" id="invitor_id" value="<%=@invited_user%>" />
	 </div> 
	<!-- bank statement Div start-->
	<div id="market_third" style="display:none;">
	<%= render :partial =>'credit_card_info' %>
	<div class="clear"></div>
	</div>
	  
	<!-- provider claim success Div start-->
	<div id="claimSuccess_market" style="left:30px;right:30px;">
		<div class="content_popup" style="font-family:Arial, Helvetica, sans-serif;">
			<span class='p1' align='center'>Congratulations! You have successfully registered with Famtivity!</span><br/><br/>
			<p>We have detected that Famtivity was previously curating this account. All of these activities have now been transferred to your account. You are now the administrator of all the activities and will have complete freedom in managing and marketing them.</p><br/><br/>
			<!--<p>Good news! This e-mail address is already in use. which means Your activities have already been added by the famtivity team. Someone will contact you soon to provide you with a temporary password so you can take ownership of your account.</p><br><br>-->
			<div> 
			<a href="javascript:void(0);" title="" onclick="navigate_credit_details();"><span id="nav-next" class="b-close"><img src="/assets/register/ok_btn.png" alt=""><span></a>
			<a href="javascript:void(0);" title=""><span class="b-close"><img src="/assets/login/cancel_button.png" alt=""></span></a>
			</div>
		</div>
		<div class="clear"></div>
          </div>
	  
        </form>

        <div class="clear"></div>
      </div>
    </div>

  </div>
</div>


<!--ajax loader
<div class='loadingmessage' style='display:none;' align="center">
  <img src='/assets/ajax-loader.gif'/>
</div> -->
<style>
  .loadingmessage{
    height: 50px;
    width: 50px;
    position: fixed;
    z-index: 1000;
    left: 50%;
    top: 25%;
    margin: -25px 0 0 -25px;
  }
</style>

<!--#include virtual="/icom_includes/bizo/tag.html"-->

<!-- START VIBRANT --><!--#include virtual="/includes/Vibrant.html" --><!-- END VIBRANT -->

<script language="JavaScript" type="text/javascript">
  function fakepath(filepath)
  {
    inputNode = filepath.replace('C:\\fakepath\\', '');
    var pos = filepath.lastIndexOf( filepath.charAt( filepath.indexOf(":")+1) );
    var filename = filepath.substring( pos+1);
	
    var ua=navigator.userAgent;
    if(ua.indexOf("Firefox")!=-1){
      $("#browse_photo").val(filepath);
    }
    else {
      $("#browse_photo").val(filename);
    }
  }
  var gDomain="www.qsstats.com";
  var gDcsId="dcs17vxkl10000wkxczu5l0wa_9y2e";
  var gFpc="WT_FPC";
  var gConvert=true;
  var gFpcDom = "webreference.com";
  if ((typeof(gConvert) != "undefined") && gConvert && (document.cookie.indexOf(gFpc + "=") == -1) && (document.cookie.indexOf("WTLOPTOUT=")==-1)) {
    document.write("<SCR"+"IPT TYPE='text/javascript' SRC='http"+(window.location.protocol.indexOf('https:')==0?'s':'')+"://"+gDomain+"/"+gDcsId+"/wtid.js"+"'><\/SCR"+"IPT>");
  }
  function dcsAdditionalParameters() {}

function validate_market(){
  //$('#provider_market_sub').submit(function (){
    var invitor = $("#invitor_id").val();
    var p_name = $("#p_name").val();
    // p_name = p_name.replace(/^\s+|\s+$/g, "");
    var p_password = $("#p_password").val();
    var p_confirm_password = $("#p_confirm_password").val();
    var p_owner_firstname=$("#p_owner_firstname").val();
    var p_owner_lastname=$("#p_owner_lastname").val();
    var p_email=$("#p_email").val();
    var browse_photo=$("#browse_photo").val();
    var b_name= $("#b_name").val();
    var p_admin_firstname=$("#p_admin_firstname").val();
    var p_admin_lastname=$("#p_admin_lastname").val();
    var admin_provider = $("#admin_provider").val();
    var address1=$("#address1").val();
    var address2=$("#address2").val();
    var p_state=$("#p_state").val();
    var p_city=$("#p_city").val();
    var p_zipcode=$("#p_zipcode").val();
    var p_country=$("#p_country").val();
    var agree_provider = $("#agree_provider").val();
    var p_time = $("#p_time").val();
    var p_phone_1=$("#p_phone_1").val();
    var p_phone_2=$("#p_phone_2").val();
    var p_phone_3=$("#p_phone_3").val();
    var p_mobile_1=$("#p_mobile_1").val();
    var p_mobile_2=$("#p_mobile_2").val();
    var p_mobile_3=$("#p_mobile_3").val();
    var p_fax=$("#p_fax").val();
    var web_addrs=$("#web_addrs").val();
    $(".FileField").css("color","#444444");

    b_name = b_name.replace(/^\s+|\s+$/g, "");
    p_fax = p_fax.replace(/^\s+|\s+$/g, "");
    address1 = address1.replace(/^\s+|\s+$/g, "");
    p_phone_1 = p_phone_1.replace(/^\s+|\s+$/g, "");
    p_phone_2 = p_phone_2.replace(/^\s+|\s+$/g, "");
    p_phone_3 = p_phone_3.replace(/^\s+|\s+$/g, "");
    p_mobile_1 = p_mobile_1.replace(/^\s+|\s+$/g, "");
    p_mobile_2 = p_mobile_2.replace(/^\s+|\s+$/g, "");
    p_mobile_3 = p_mobile_3.replace(/^\s+|\s+$/g, "");
    web_addrs = web_addrs.replace(/^\s+|\s+$/g, "");
    
    /*    p_owner_firstname = p_owner_firstname.replace(/^\s+|\s+$/g, "");
    p_owner_lastname = p_owner_lastname.replace(/^\s+|\s+$/g, "");
     */

    $("#username_usr").css("border","1px solid #BDD6DD");
    $("#p_name").css("border","1px solid #BDD6DD");
    $("#b_name").css("border","1px solid #BDD6DD");
    $("#p_password").css("border","1px solid #BDD6DD");
    $("#p_confirm_password").css("border","1px solid #BDD6DD");
    $("#browse_photo").css("border","1px solid #BDD6DD");
    $("#p_owner_firstname").css("border","1px solid #BDD6DD");
    $("#p_owner_lastname").css("border","1px solid #BDD6DD");
    $("#p_admin_firstname").css("border","1px solid #BDD6DD");
    $("#p_admin_lastname").css("border","1px solid #BDD6DD");
    $("#admin_provider").css("border","1px solid #BDD6DD");
    $("#p_time").css("border","1px solid #BDD6DD");
    $("#web_addrs").css("border","1px solid #BDD6DD");
    $("#p_email").css("border","1px solid #BDD6DD");
    $("#p_phone_1").css("border","1px solid #BDD6DD");
    $("#p_phone_2").css("border","1px solid #BDD6DD");
    $("#p_phone_3").css("border","1px solid #BDD6DD");
    $("#p_mobile_1").css("border","1px solid #BDD6DD");
    $("#p_mobile_2").css("border","1px solid #BDD6DD");
    $("#p_mobile_3").css("border","1px solid #BDD6DD");
    $("#p_fax").css("border","1px solid #BDD6DD");
    $("#address1").css("border","1px solid #BDD6DD");
    $("#address2").css("border","1px solid #BDD6DD");
    $("#agree_provider").css("border","1px solid #BDD6DD");
    $("#p_zipcode").css("border","1px solid #BDD6DD");

    $("#p_name_error").html("");
    $("#b_name_error").html("");
    $("#p_password_error").html("");
    $("#p_confirm_password_error").html("");
    $("#p_owner_firstname_error").html("");
    $("#p_owner_lastname_error").html("");
    $("#p_email_error").html("");
    $("#b_logo_error").html("");
    $("#p_admin_firstname_error").html("");
    $("#p_admin_lastname_error").html("");
    $("#admin_provider_error").html("");
    $("#address1_error").html("");
    $("#address2_error").html("");
    $("#p_state_error").html("");
    $("#p_city_error").html("");
    $("#p_zipcode_error").html("");
    $("#p_country_error").html("");
    $("#agree_provider_error").html("");
    $("#p_time_error").html("");
    $("#p_phone_error").html("");
    $("#p_mobile_error").html("");
    $("#p_fax_error").html("");
    $("#web_addrs_error").html("");

    /*
    $("#p_language_error").html("");
      $("#p_admin_error").html("");*/

    $("#p_name_error").parent().css("display","none");
    $("#b_name_error").parent().css("display","none")
    $("#p_email_error").parent().css("display","none");
    $("#p_password_error").parent().css("display","none");
    $("#p_confirm_password_error").parent().css("display","none");
    // $("#p_owner_firstname_error").parent().css("display","none");
    $("#p_owner_lastname_error").parent().css("display","none");
    $("#b_logo_error").parent().css("display","none");
    //$("#p_admin_firstname_error").parent().css("display","none");
    $("#p_admin_lastname_error").parent().css("display","none");
    $("#admin_provider_error").parent().css("display","none");
    $("#address1_error").parent().css("display","none");
    $("#address2_error").parent().css("display","none");
    $("#p_state_error").parent().css("display","none");
    $("#p_city_error").parent().css("display","none");
    $("#p_zipcode_error").parent().css("display","none");
    $("#p_country_error").parent().css("display","none");
    $("#agree_provider_error").parent().css("display","none");
    $("#p_time_error").parent().css("display","none");
    $("#p_phone_error").parent().css("display","none");
    $("#p_mobile_error").parent().css("display","none");
    $("#p_fax_error").parent().css("display","none");
    $("#web_addrs_error").parent().css("display","none");

    /*
    $("#p_owner_error").parent().css("display","none");
    $("#p_language_error").parent().css("display","none");
    /*$("#p_admin_error").parent().css("display","none");*/

    var errorFlag = false;
    //$("#city_height").css("margin-top","18px");

    if(p_name == "" || p_name == "Eg: John Smith"){
      $("#p_name").css("border","1px solid #fc8989");
      $("#p_name_error").html("Please enter your name");
      $("#p_name_error").parent().css("display","block");
      errorFlag = true;
    }
    /*    else if(!validateName(p_name)){
      $("#p_name").css("border","1px solid #fc8989");
      $("#p_name_error").html("Please Use Only Alphabets");
      $("#p_name_error").parent().css("display","block");
      errorFlag = true;
    }
     */    else if(p_name.length>25){
      $("#p_name").css("border","1px solid #fc8989");
      $("#p_name_error").html("Please Do Not Exceed 25 Characters");
      $("#p_name_error").parent().css("display","block");
      errorFlag = true;
    }

    if(b_name =="" || b_name == "Enter the name of your business"){
      $("#b_name").css("border","1px solid #fc8989");
      $("#b_name_error").html("Please enter your business name");
      $("#b_name_error").parent().css("display","block");
      errorFlag = true;
    }

    /*else if(!validateName(b_name)){
      $("#b_name").css("border","1px solid #fc8989");
      $("#b_name_error").html("Please Use Only Alphabets");
      $("#b_name_error").parent().css("display","block");
      errorFlag = true;
    }*/
    else if(b_name.length>50){
      $("#b_name").css("border","1px solid #fc8989");
      $("#b_name_error").html("Please Do Not Exceed 50 Characters");
      $("#b_name_error").parent().css("display","block");
      errorFlag = true;
    }

    if (p_password == "" ||  p_password == "password"){
      $("#p_password").css("border","1px solid #fc8989");
      $("#p_password_error").html("Please enter your password");
      $("#p_password_error").parent().css("display","block");
      errorFlag = true;
    }
    else if(p_password.length<8){
      $("#p_password").css("border","1px solid #fc8989");
      $("#p_password_error").html("Please enter a password with a minimum of 8 characters");
      $("#p_password_error").parent().css("display","block");
      errorFlag = true;
    }
    if(p_confirm_password =="" || p_confirm_password == "password"){
      $("#p_confirm_password").css("border","1px solid #fc8989");
      $("#p_confirm_password_error").html("Please confirm your password");
      $("#p_confirm_password_error").parent().css("display","block");
      errorFlag = true;
    }
    else if(p_confirm_password != p_password){
      $("#p_confirm_password").css("border","1px solid #fc8989");
      $("#p_confirm_password_error").html("Please enter the correct confirm password");
      $("#p_confirm_password_error").parent().css("display","block");
      errorFlag = true;
    }
    if(p_email == "" || p_email=="Eg:john@gmail.com"){
      $("#p_email").css("border","1px solid #fc8989");
      $("#p_email_error").html("Please enter your Email");
      $("#p_email_error").parent().css("display","block");
      errorFlag = true;
    }
    else if(!validateCorrectEmail(p_email)){
      $("#p_email").css("border","1px solid #fc8989");
      $("#p_email_error").html("Please enter a valid Email");
      $("#p_email_error").parent().css("display","block");
      errorFlag = true;
    }
    /*    else if(!validateDot(p_email)){
        $("#p_email").css("border","1px solid #fc8989");
        $("#p_email_error").html("Please enter a valid Email");
        $("#p_email_error").parent().css("display","block");
        errorFlag = true;
    }
        if(browse_photo == ""){
      $("#browse_photo").css("border","1px solid #fc8989");
      $("#b_logo_error").parent().css("display","block");
      $("#b_logo_error").html("Please select a logo for your business");
      errorFlag = true;
    }*/ 
    if(browse_photo != ""){
      var val=validateBrowse();
      if(!val){
        $('#b_logo_error').html('Please select a logo for your business');
        errorFlag = true;
      }
    }
    if(p_admin_firstname == "" || p_admin_firstname == "First Name" ){
      $("#p_admin_firstname").css("border","1px solid #fc8989");
      $("#p_admin_firstname_error").parent().css("display","block");
      $("#p_admin_firstname_error").html("Please enter your first name");
      //$("#p_admin_lastname_error").css('marginLeft','298px');

      errorFlag = true;
    }
    if(p_admin_lastname == "" || p_admin_lastname == "Last Name" ){

      $("#p_admin_lastname").css("border","1px solid #fc8989");
      $("#p_admin_lastname_error").parent().css("display","block");
      $("#p_admin_lastname_error").html("Please enter your last name");
      $(".marginTop12").css('marginTop','-5px');
      $(".marginTop12").css('float','left');
      errorFlag = true;
    }
   /* if(p_owner_firstname != "First name" ){
      //if(!validateName(p_owner_firstname)){
      // $("#p_owner_firstname").css("border","1px solid #fc8989");
      //        $("#p_owner_firstname_error").parent().css("display","block");
      //        $("#p_owner_firstname_error").html("Please enter a valid name");
      //        errorFlag = true;
      //}
      if(p_owner_firstname.length>25){
        $("#p_owner_firstname").css("border","1px solid #fc8989");
        $("#p_owner_firstname_error").parent().css("display","block");
        $("#p_owner_firstname_error").html("Please Do Not Exceed 25 Characters");
        errorFlag = true;
	
      }
    }*/
      
    

   /* if(p_owner_lastname != "Last name" ){
      //if(!validateName(p_owner_lastname)){
      //$("#p_owner_lastname").css("border","1px solid #fc8989");
      // $("#p_owner_lastname_error").parent().css("display","block");
      //$("#p_owner_lastname_error").html("Please enter a valid name");
      //errorFlag = true;
      //}
      if(p_owner_lastname.length>25){
        $("#p_owner_lastname").css("border","1px solid #fc8989");
        $("#p_owner_lastname_error").parent().css("display","block");
        $("#p_owner_lastname_error").html("Please Do Not Exceed 25 Characters");
        errorFlag = true;
      }
    }*/
     
    
    if(address1 == "" || address1 == "Enter address"){
      $("#address1").css("border","1px solid #fc8989");
      $("#address1_error").parent().css("display","block");
      $("#address1_error").html("Please enter your address");

      errorFlag = true;
    }
    if(p_state == "" || p_state == "--Choose state--"){
      $("#m_state").css("border","1px solid #fc8989");
      $("#p_state_error").parent().css("display","block");
      $("#p_state_error").html("Please select the state");
      errorFlag = true;
    }

    if(p_city == "" || p_city == "--Choose city--"){
      $("#m_city").css("border","1px solid #fc8989");
      $("#p_city_error").parent().css("display","block");
      $("#p_city_error").html("Please select the city");
      errorFlag = true;
    }
    /*    if((p_phone=="Enter Your Phone Number" && p_mobile=="Enter Your Mobile Number") || (p_phone!="Enter Your Phone Number" || p_mobile!="Enter Your Mobile Number")){
        if(!validate_Phone(p_phone) && !validate_Mobilephone(p_mobile)){
            $("#p_mobile").css("border","1px solid #fc8989");
            $("#p_mobile_error").html("Please enter mobile number as xxx-xxx-xxxx Digit format");
            $("#p_mobile_error").parent().css("display","block");
            $("#p_phone").css("border","1px solid #fc8989");
            $("#p_phone_error").parent().css("display","block");
            $("#p_phone_error").html("Please enter phone number as xxx-xxx-xxxx Digit format");
            errorFlag = true;
        }
    }
     */
    if(p_phone_1=="xxx" || p_phone_1=="" || p_phone_1=="000"){
      $("#p_phone_1").css("border","1px solid #fc8989");
      $("#p_phone_error").parent().css("display","block");
      $("#p_phone_error").html("Please enter your phone number");
      errorFlag = true;
    }
	else if(p_phone_1.length<3){
      $("#p_phone_1").css("border","1px solid #fc8989");
      $("#p_phone_error").parent().css("display","block");
      $("#p_phone_error").html("Please enter your valid phone number");
      errorFlag = true;
	}


    if(p_phone_2=="xxx" || p_phone_2=="" || p_phone_2=="000"){
      $("#p_phone_2").css("border","1px solid #fc8989");
      $("#p_phone_error").parent().css("display","block");
      $("#p_phone_error").html("Please enter your phone number");
      errorFlag = true;
    }
	else if(p_phone_2.length<3){
      $("#p_phone_2").css("border","1px solid #fc8989");
      $("#p_phone_error").parent().css("display","block");
      $("#p_phone_error").html("Please enter your valid phone number");
      errorFlag = true;
	}


    if(p_phone_3=="xxxx" || p_phone_3=="" || p_phone_3=="0000"){
      $("#p_phone_3").css("border","1px solid #fc8989");
      $("#p_phone_error").parent().css("display","block");
      $("#p_phone_error").html("Please enter your phone number");
      errorFlag = true;
    }
	else if(p_phone_3.length<4){
      $("#p_phone_3").css("border","1px solid #fc8989");
      $("#p_phone_error").parent().css("display","block");
      $("#p_phone_error").html("Please enter your valid phone number");
      errorFlag = true;
	}
	
if (  p_mobile_1 !="xxx" && p_mobile_2 != "xxx" && p_mobile_3 != "xxxx") {
	
    if( p_mobile_1 !="" ){
	        if(p_mobile_1.length<3){
		  $("#p_mobile_1").css("border","1px solid #fc8989");		
		  $("#p_mobile_error").parent().css("display","block");
		  $("#p_mobile_error").html("Please enter your mobile number");
		  errorFlag = true;
		}
	}
	
    if( p_mobile_2 !="" ){
		 if(p_mobile_2.length<3){		  
		  $("#p_mobile_2").css("border","1px solid #fc8989");		 
		  $("#p_mobile_error").parent().css("display","block");
		  $("#p_mobile_error").html("Please enter your mobile number");
		  errorFlag = true;			
		}
	}

    if( p_mobile_3 !="" ){
		 if(p_mobile_3.length<4){		 
		  $("#p_mobile_3").css("border","1px solid #fc8989");
		  $("#p_mobile_error").parent().css("display","block");
		  $("#p_mobile_error").html("Please enter your mobile number");
		  errorFlag = true;			
		}
	}
	  if( p_mobile_1 == "000" &&  p_mobile_2 == "000" && p_mobile_3 == "0000" ){
		$("#p_mobile_1").css("border","1px solid #fc8989");	
		$("#p_mobile_2").css("border","1px solid #fc8989");	
		 $("#p_mobile_3").css("border","1px solid #fc8989");
		  $("#p_mobile_error").parent().css("display","block");
		  $("#p_mobile_error").html("Please enter your mobile number");
		  errorFlag = true;
	  }
}
    if(web_addrs !="Enter the URL of your website"){
      if(!ValidateWebsiteAddress(web_addrs)){
        $("#web_addrs").css("border","1px solid #fc8989");
        $("#web_addrs_error").parent().css("display","block");
        $("#web_addrs_error").html("Please enter your URL");
        errorFlag = true;
      }
    }
	 
    if(p_fax !="Enter your fax number"){
      if(isNaN(p_fax)){
        $("#p_fax").css("border","1px solid #fc8989");
        $("#p_fax_error").parent().css("display","block");
        $("#p_fax_error").html("Please enter fax number");
        errorFlag = true;
      }
    }

    /* if(p_fax == "" || p_fax == "Enter your fax number"){
      $("#p_fax").css("border","1px solid #fc8989");
      $("#p_fax_error").parent().css("display","block");
      $("#p_fax_error").html("Please enter fax number");
      errorFlag = true;
    }

    if(web_addrs == "" || web_addrs== "Enter the URL of your website"){
      $("#web_addrs").css("border","1px solid #fc8989");
      $("#web_addrs_error").parent().css("display","block");
      $("#web_addrs_error").html("Please enter the web address");
      errorFlag = true;
    }
    else if(!ValidateWebsiteAddress(web_addrs)){
      $("#web_addrs").css("border","1px solid #fc8989");
      $("#web_addrs_error").parent().css("display","block");
      $("#web_addrs_error").html("Please enter the valid web address");
      errorFlag = true;
    }
    else if(!ValidateWebAddress(web_addrs)){
      $("#web_addrs").css("border","1px solid #fc8989");
      $("#web_addrs_error").parent().css("display","block");
      $("#web_addrs_error").html("Please enter the valid web address");
      errorFlag = true;
    }
     */    if(p_zipcode == "Enter zip code"){
      $("#p_zipcode").css("border","1px solid #fc8989");
      $("#p_zipcode_error").parent().css("display","block");
      $("#p_zipcode_error").html("Please enter your zip code");
      errorFlag = true;
    }
    else if(!validateZipcode(p_zipcode)){
      $("#p_zipcode").css("border","1px solid #fc8989");
      $("#p_zipcode_error").html("Please enter a valid zip code");
      $("#p_zipcode_error").parent().css("display","block");
      errorFlag = true;
    }


    if(p_country == "" || p_country == "--Choose country--"){
      //$(".selectBoxProvider").css("background","url('/assets/register/select_box_error.png') no-repeat");
      $("#m_country").css("border","1px solid #fc8989");
      $("#p_country_error").parent().css("display","block");
      $("#p_country_error").html("Please select the country");
      errorFlag = true;
    }

    /*    if(p_time =="" || p_time!= "--Choose Time Zone--"){
        $(".selectBoxProvider").css("background","url('/assets/register/select_box_error.png') no-repeat");
        $(".selectBoxPTime").css("border","1px solid #fc8989");
        $("#p_time_error").parent().css("display","block");
        $("#p_time_error").html("Please select the time zone");
        errorFlag = true;
    }
     */   if (agree_provider == ""){
      $('#p_checkbox_error').css('display','block');
      $('#p_checkbox_normal').css('display','none');
      $("#agree_provider_error").html("Please check the terms of service box");
      $("#agree_provider_error").parent().css("display","block");
      //$("#p_checkbox_normal").css("border","1px solid #fc8989");
      errorFlag = true;
    }


    if(errorFlag){
      return false;
    }
    else{
      /*      $('.loadingmessage').show();
      $(this).ajaxSubmit({
        success: afterSuccess
        });*/

      //$('.loadingmessage').show();
      $.ajax({
        type: "POST",
        url: "users/curated_user_exist",
        data: {
          "email": p_email
        },
        dataType : 'json',
        iframe: 'true',
        cache: false,
        success: function(data){
          if (data=="failed"){
            $('.loading_image').hide();
            $("#p_email").css("border","1px solid #fc8989");
            $("#p_email_error").html("This Email is already registered with Famtivity.<br/> Please enter a different Email address.");
            $("#p_email_error").parent().css("display","block");
          }
	 else if(data=="curated")
	  {
	    $("#curated_user").val('cur_user');
	    $('.loading_image').hide();
	     $("#claimSuccess_market").bPopup({
		modalClose:false
		});
	    //$("#provider_market_sub").ajaxSubmit({target: '#register_outerContainer'});
	  }
          else{
            //$("#provider_market_sub").ajaxSubmit({target: '#register_outerContainer'});
	    
		$('.loading_image').hide();
		$("#market_second").css("display","none");
		$("#market_third").css("display","block");
		$("#img2_act").attr("src","/assets/provider_register/step_2active.png");
		$("#img3_act").attr("src","/assets/provider_register/step_3inactive.png");
		$("#add").css("font-weight","bold");
		$("#up").css("font-weight","normal");
		$(".headCont").html("Registered as Provider");

          }
        }
      });


	$(".headCont").html("Registered as Provider");
	    
      //$("#provider_market_sub").ajaxSubmit(function() {
      //alert("Thank you for your comment!");
      //});

      
      // var queryString = $('#provider_market_sub').formSerialize();

      // the data could now be submitted using $.get, $.post, $.ajax, etc
      // $.post('/provider_submit', queryString);
      return false;
    }
  }
  
function navigate_credit_details(){
	$("#market_second").css("display","none");
	$("#market_third").css("display","block");
	$("#img2_act").attr("src","/assets/provider_register/step_2active.png");
	$("#img3_act").attr("src","/assets/provider_register/step_3inactive.png");
	$("#add").css("font-weight","bold");
	$("#up").css("font-weight","normal");
}
  
  function afterSuccess()
  {
    $('.loadingmessage').hide();
	$(".headCont").html("Registered as Provider");
  }

</script>



