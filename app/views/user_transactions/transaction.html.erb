<%=stylesheet_link_tag "event/event","event_index/menu","admin/admin", :media => "all"%>
<%=javascript_include_tag "global/checkbox","event_more/event_more","event_index/event_index","event_index/menu","event/provider_list_update","pagination" %>

<link rel="stylesheet" type="text/css" href="/assets/event_index/event_index.css?v=1" />

<script src="/assets/admin/admin.js" type="text/javascript" charset="utf-8"></script>

<!-- the jScrollPane script -->

<!--[if (gt IE 6)&(lt IE 9)]><link rel="stylesheet" href="/assets/admin/admin_ie7.css" type="text/css" media="all" /><![endif]-->
<style>
/*report td hide and show*/
.td_less{
	display:none;
}
  #providerEventList{
    background:#F6F8F7;
  }
  #providerEventList .topContainer .leftMenus{
    /* width:100%;*/
  }
  #providerEventList .topContainer span.num_Act{
    color: #807E7E;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 12px;
    font-weight: normal;
    position: relative;
    top: 0px;
    left:6px;
    .top: 2px;
  }
  @media \0screen{
    #providerEventList .topContainer span.num_Act{
      top: 0px;
    }
  }
  #providerEventList .topContainer .pipeSymbol{
    position:static;
    vertical-align:inherit;
    .position:relative;
    .top:-1px;
    vertical-align:inherit;
  }
  #menu {
    display: inline-block;
    position: relative;
    top: 4px;
    .top: -3px;
    left:10px;
  }


  .dateDiv{
    display: inline-block;
    position:relative;
    width:100px;
    height:29px;
    padding:0px 5px 0px 5px;
    border:1px solid #CDE0E6;
    background:#F6F8F7;
  }
  .dateTextbox{
    display: inline-block;
    float:left;
    width:70px;
    .width:67px;
    height:16px;
    color:#959292;
    font-size:13px;
    margin-top:5px;
    outline:none;
    overflow: hidden;
    border:1px solid #F6F8F7;
    background:#F6F8F7;
  }
  .StrtDte{
    float: left;
    display: inline-block;
    height:31px;
  }
  .StrtTxt{
    float: left;
    display: inline-block;
    font-size: 13px;
    color: #959292;
    margin-top: 7px;
  }
  .ToTxt{
    font-size: 15px;
    color: #626262;
    display:inline-block;
    padding:0 5px 0 5px;
  }
  .CalenderDiv{
    width: 310px;
    float: left;
    display:inline-block;
    .margin-top:6px;
  }
  @media \0screen{
    .CalenderDiv{
      margin-top:3px;
    }
    #field{
      float:none;
    }
  }

  .setColor{
    color:#4c92b4;
  }
  #filter_admin_category{
    .margin-top:8px;
  }
  #filter_by_provider{
    .margin-top:8px;
  }
  #providerEventList .topContainer .event_search{
    width:190px;
  }
  #providerEventList .topContainer .searchDiv{
    width:280px;
  }
  #providerEventList .topContainer .checkboxImg{
    top:5px;
    .top:7px;
  }
  .dispProviderCatDiv{
    width: 700px;    
  }
  .eventmoreContainer .centerContainer{
    width: 700px;
  }
  .eventmoreContainer .innerContainer{
    width: 700px;
  }
  #acc #nested .accDiv{
    width: 688px;
  }
  #acc #nested .accDiv h3{
    width: 680px;
  }
  #acc #nested .acc-content{
    width: 661px;
  }
  #acc #nested .acc-content .inner_acc-content{
    width:203px;
  }
  #providerEventList .topContainer .menuText{
    font-weight:bold;
  }
  #acc #nested .acc-content{
    height: 96px;
  }
  #acc #nested .acc-content .inner_acc-content{
    height:26px;
    margin:0;
  }
  #event_index_container .Setlt{
    height:auto;
    margin:0;
  }
  #event_index_container .grayColorText{
    color: #807E7E;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 12px;
    font-weight:normal;
  }
  #event_index_container .setSportsText{
    cursor:pointer;
    width:auto;
    margin: 15px 0;
  }
  #event_index_container .setSportsText:hover{
    cursor:pointer;
    width:auto;
    margin: 15px 0;
  }
  #event_index_container .errorDiv{
    margin:5px 0 0 10px;
    color:#fc8989;
    font-family: Arial,Helvetica,sans-serif;
    font-size: 12px;
  }
  #event_index_container .provider_menu{
    float:left;    
    height:240px;
    overflow-y:auto;
    margin: -27px 0 0 140px;	
    font-size:13px;
    background:#F6F8F7;
    color:#959292;
    border:1px solid #C2DDE4; 
    padding: 10px 10px 0 0;
  }
  #event_index_container .provider_menu a{	
    color:#959292;
    display:block;
    white-space: nowrap;
    text-decoration:none;
    padding:5px 10px 5px 8px;
  }
  #event_index_container .provider_menu a:hover{
    display:block;
    white-space: nowrap;
    text-decoration:none;
    padding:5px 10px 5px 8px;	
    color:#F97C0E;
  }
  @media \0screen{
    #menu {
      top: 4px;
    }
  }
  #event_index_container .status_menu{
    float:left;    
    height:240px;
    overflow-y:auto;
    margin: -27px 0 0 140px;	
    font-size:13px;
    background:#F6F8F7;
    color:#959292;
    border:1px solid #C2DDE4; 
    padding: 10px 10px 0 0;
  }
  #event_index_container .status_menu a{	
    color:#959292;
    display:block;
    white-space: nowrap;
    text-decoration:none;
    padding:5px 10px 5px 8px;
  }
  #event_index_container .status_menu a:hover{
    display:block;
    white-space: nowrap;
    text-decoration:none;
    padding:5px 10px 5px 8px;	
    color:#F97C0E;
  }
#providerEventList .topContainer{
    width:100%;
    height:40px;
    background:#F6F8F7;
	padding-top:10px;
	.margin-top:0px;
}
#menu li:hover ul.sub-menu {
	display: block;
	z-index: 2147483647;
	position: absolute;
	left: 0;
	 width: auto;
	 /*background:#000;*/
}

#event_index_container .GoButton{
	left: 7px;
	 top: 2px;
}
.ui-datepicker-trigger {
    cursor: pointer;
    float: right;
    margin-top: -21px;
    .margin-top: 0px;
}
#providerEventList  .selectedMenuText{
    color:#5aa3b6;
    font-family:Arial, Helvetica, sans-serif;
    font-weight:bold;
    font-size:14px;
}
#providerEventList .dot{
    display:inline-block;
    position:relative;
    top:3px;
}
#providerEventList  .menuText{
    color:#5aa3b6;
    font-family:Arial, Helvetica, sans-serif;
    font-weight:normal;
    font-size:14px;
}
.actImg{
	display:inline-block;
	margin-left:3px;
	margin-left:-1px\0/IE9;
}
.hoveredmenu
{
    width:94px;
    height:22px;
    padding: 0px 5px 3px 5px;
    border:1px solid #A9D3E1;
    border-bottom:none;
    background:#E6F5F8;
    font-weight:bold;
    margin:0px 0 0 -9px;
}

.transDivMenu1 ul{
text-align: left;
  display: inline;
  margin: 0;
  padding: 15px 4px 17px 0;
  list-style: none;
}
.transDivMenu1  ul li{
  display: inline-block;
  position: relative;
  cursor: pointer;
}
.transDivMenu1 ul li:hover {
  background: #F6F8F7;
  border:1px solid #A9D3E1;
}
.transDivMenu1 ul li ul li:hover {
  background: #F6F8F7;
  color: #fff;
  border:none;
}
.transDivMenu1 ul li ul {
  padding: 0;
  position: absolute;
  top: 28px;
 /* left: 8;*/
  width: 150px;
  display:none;
   visibility: hidden;
   border:1px solid #A9D3E1;
  }
  .transDivMenu1 ul li ul li { 
  background: #F6F8F7; 
   display: block; 
  color: #fff;
  }
  
 .transDivMenu1  ul li ul li:hover { color:#f97c0e; }
.transDivMenu1 ul li:hover ul {
  display: block;
  opacity: 1;
  visibility: visible;
}
</style>

<!--autocomplete-->
<script src="assets/auto_complete/jquery-1.8.3.js"></script>
<!--thils style for search box width fixed-->
<style>
  #ui-id-1 {
    width:200px;
    overflow: hidden;
  }
</style>

<script type="text/javascript" src="/assets/global/jquery.ui.core.js"></script>
<script type="text/javascript" src="/assets/global/jquery.ui.datepicker.js"></script>

<link rel="stylesheet" type="text/css" href="/assets/global/jquery.ui.datepicker.css" />
<link rel="stylesheet" type="text/css" href="/assets/global/jquery.ui.theme.css" />
<script language="javascript">
$(document).ready(function(){
  var curTime = new Date();
  var cdate = curTime.getDate();
  var cmonth = curTime.getMonth();
  var cyear = curTime.getFullYear();
  cmonth = parseInt(cmonth) + 1;
  var weekday = new Array(7);
  weekday[0] = "Sun";
  weekday[1] = "Mon";
  weekday[2] = "Tue";
  weekday[3] = "Wed";
  weekday[4] = "Thu";
  weekday[5] = "Fri";
  weekday[6] = "Sat";
  var cday = curTime.getDay();
  var incval = parseInt(cday) + 1;
  var cday = weekday[cday];

  //var cuday = cday + " " + cmonth + "/" + cdate + "/" + cyear;
  var date_value = cmonth + "/" + cdate + "/" + cyear;
  var  cuday = cyear + "-" + cmonth + "-" + cdate ;

  $('#act_from').val(date_value);
  $('#act_from_alt').val(cuday);
  $('#act_to').val(date_value);
  $('#act_to_alt').val(cuday);
});
$(function() {
	$( "#act_from" ).datepicker({
		  showOn : "button",
		  buttonImage : "/assets/create_new_activity/date_icon.png",
		  buttonImageOnly : true,
		  dateFormat : "m/d/yy",
		  altField : "#act_from_alt",
		  altFormat : "yy-m-d",
		  onClose: function( selectedDate ) {
			$( "#act_to" ).datepicker( "option", "minDate", selectedDate );
		}
	});
	$( "#act_to" ).datepicker({
		  showOn : "button",
		  buttonImage : "/assets/create_new_activity/date_icon.png",
		  buttonImageOnly : true,
		  dateFormat : "m/d/yy",
		  altField : "#act_to_alt",
		  altFormat : "yy-m-d",
		  onClose: function( selectedDate ) {
			$( "#act_from" ).datepicker( "option", "maxDate", selectedDate );
		}
	});
});
  function filter_by_admin_date(){
    var date_from = $("#act_from_alt").val();
    var date_to = $("#act_to_alt").val();
    if (Date.parse(date_from) > Date.parse(date_to) || date_from == "" || date_to =="" ) {
      $(".topContainer").css('height','70px');
      $("#dateError").show();
      $("#dateError").html("Invalid date range.");
      return false;
    }
    else{
      $(".topContainer").css('height','40px');
      $("#dateError").hide();
      $("#dateError").html("");

      $.get("/transaction",{
        "date_from":date_from,
        "date_to":date_to,
        "trans_date":"date"
      }, null, "script");
    }
  }
 
   $(function(){
    $('#menu ul li a').hover(function (){
      $('.actDiv').css('border','1px solid #DBEEF4');
    }, function(){
       $('.actDiv').css('border','1px solid #F6F8F7');
    });
  });

//report td hide and show
	function click_less(){ 
		$(".td_less").hide();
		$(".td_more").show();		
	}
	function click_more(){ 
		$(".td_less").show();
		$(".td_more").hide();
	}
  function reports_stats(){
 $(".transDivMenu ").addClass("hoveredmenu");
  }
   function reports_stats_act1(){
 $(".hoveredmenu").removeClass().addClass("transDivMenu");
  }
</script>
<body id="CategoriesBarPage">

 <div id="event_index_container">
  <input type="hidden" id="actid_chk" name="actid_chk" value="" />
  

  <form  id="provider_event_list" name="provider_event_list">
    <div style="margin-top:60px;background:none" id="providerEventList">
     <table cellspacing="0" cellpadding="0" width="100%" border="0" style="background:#F6F8F7">
		<tr>
			 <td align="center" class="header_div">
			<div style="display:block; padding: 15px 0 10px 0">
			  <span><a href="/provider?<%=current_user.user_profile.business_name.parameterize if !current_user.user_profile.nil? && !current_user.user_profile.business_name.nil?%>/<%=current_user.user_profile.city.parameterize if !current_user.user_profile.nil? && !current_user.user_profile.city.nil?%>" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Activity List']);">Activity List</a></span>
			  <span class="dot menuText">&bull;</span>
			  <span><a href="/provider_activites" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Activity Cards']);">Activity Cards</a></span>
			  <span class="dot menuText">&bull;</span>
        <span><a href="/provider_activity_discount" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Activity Discount']);">Activity Discount</a></span><span class="dot menuText">&bull;</span>
			  <span><a href="/activity_provider_schedule" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Schedule']);">Schedule</a></span>
			  <span class="dot menuText">&bull;</span>
			  <span><a href="/provider_profile" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Business Info']);">Business Info</a></span>
			  <span class="dot menuText">&bull;</span>
			  <span><a href="/provider_policies" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Policies']);">Policies</a></span>
			  <span class="dot menuText">&bull;</span>
			  <span><a href="/provider_plan" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Plan']);">Plan</a></span>
			  <span class="dot menuText">&bull;</span>
			  <span><a href="/change_password" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Password']);">Password</a></span>
			  <span class="dot menuText">&bull;</span>
			  <span><a href="/provider_settings" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Settings']);">Settings</a></span>
			<span class="dot menuText">&bull;</span>
			  <span><a href="/transaction" class="menuText" title="" onclick = "_gaq.push(['_trackEvent','Provider Module', 'clickSettings','Reports']);"><b>Reports</b></a></span>
			  <span class="dot menuText">&bull;</span>
			<span><a href="javascript:void(0);" class="menuText" title="" onClick="pop_provider_embed_Detail('activity_detail/provider_embedded_link?activity_id=<%= get_embed_data if current_user.present? %>'); _gaq.push(['_trackEvent','Provider Module', 'clickSettings','Embed Link']);">Embed Link</a></span>
			</div>
			</td>
		</tr>
	  </table>
      <div class="clear"></div>
      <div class="topContainer1 sponsorship">
        <table width="100%" cellspacing="0" border="0" cellpadding="0">
          <tbody>
            <tr>

              <!--report filter start august 05-->

              <td height="40" align="left" width="120">
              <div class="transDivMenu1" id="menu1" style="left:16px;top:0px;">
                          <ul>
                            <li><a id="activity_stat" style="margin-left:0px;width:95px;display:block;.top:-2px;height:20px;margin-top:0px;" class="transDiv" href="#" ><span class="menuText"><b id="setActivity">Sort By</b></span><span class="actImg">
                              <%= image_tag("/assets/event_index/dropdown_arrow.png", id:"arrow1", style: " position: relative; top: -1px;", size:"7x4")%>
                            </span></a>
                              <ul style="width:142px;height:80px;margin-left:-1px;margin-top:-2px;z-index:100000;" class="sub-menu dispProvidertransDiv">
                                <li><a href="javascript:void(0)" title="" id="select" onClick="activity_transaction('activity')" >By Activity </a></li>
                                <li><a href="javascript:void(0)" title="" id="select" onClick="activity_transaction('date')" >By Date</a></li>
			  <li><a href="javascript:void(0)" title="" id="select" onClick="activity_transaction('activity_stats')" >By Activity Stats</a></li>
                              </ul>
                            </li>
                          </ul>
                          <div class="clear"></div>
                        </div>
                </td>
	    <%if !@trans.nil? && @trans.length > 0 %>
	      <td height="40" align="left">
	      <div id="byActivityDiv" style="display:none;margin-left:70px;">
		<select onchange="trans_activityname()" style="opacity:1;padding:5px 0;position: relative;top: -3px;width:200px;border:1px solid #CDE0E6;color: #999999;" id="trans_list_view" name="trans_list_view">
			<option value="">-- Select Activity Name--</option>
                                  <%if !@activity_name.nil? && @activity_name.present? %>
                                    <%@activity_name.each do |act_name|%>
                                   <option value="<%=act_name.activity_id%>"><%=act_name.activity_name if !act_name.nil?%></option>
                                  <%end%>
                                  <%end%>
			    </select>
              </div>
              </td>
	      
	     
	      
    <!--report filter end-->

                <td height="40" align="left">
                   <div class="clear"></div>
                      <div class="pipeSymbol num_Act" id="filter_admin_date" style="display:none;width:380px;top:-3px; position:relative;">
                        <div class="CalenderDiv">
                          <div class="StrtTxt ToTxt menuText">From</div>
                          <div class="StrtDte">
                            <div class="dateDiv">
                              <input type="text"  id="act_from" name="act_from" class="dateTextbox" value="" readonly="readonly" style="margin-right:3px;" tabindex="61"/>
                              <input type="hidden" id="act_from_alt" name="act_from_alt" value=""/>
                            </div>
                            <div class="clear"></div>
                          </div>
                          <div>
                            <div class="StrtTxt ToTxt menuText">To</div>
                            <div class="StrtDte">
                              <div class="dateDiv">
                                <input type="text"  id="act_to" name="act_to" class="dateTextbox" value="" readonly="readonly" style="margin-right:3px;" tabindex="62"/>
                                <input type="hidden" id="act_to_alt" name="act_to_alt" value=""/>
                              </div>
                            </div>
			    <div id="dateError" style="color:#FC8989;font-size: 12px;"></div>
                            <div class="clear"></div>
                          </div>
                        </div>

                        <div class="GoButton" style=".top:10px;"><a href="javascript:void(0)" title="" onClick="filter_by_admin_date()">
                          <%= image_tag("/assets/event_index/go_button.png", size:"33x26")%>
                        </a></div>
                        <div class="clear"></div>
                      </div>
                      <div class="clear"></div>
                </td>
                <%end%>
		    <td height="40" align="right" id="provider_activity_stats">
		      <div style="color: #2b91af; padding-right: 15px; font-size: 14px;margin-top: -6px;">
            <%= image_tag("/assets/policies/dwniconnormal.png")%>
			    <%if !@trans_group.nil? && @trans_group.count >0%>
				<%= link_to "CSV", transaction_path(format: "csv"), {:class=>"menuText"}%> |
				<%= link_to "Excel", transaction_path(format: "xls"),{:class=>"menuText"}%>
			    <%else%>
				<span class="menuText"><b>CSV</b></span> |
				<span class="menuText"><b>Excel</b></span>	
			    <%end%>	        
		      </div>
		</td>
        </tr>
          </tbody></table>
	 
      </div>
     <div class="clear"></div>

      <div id="provider_partial_event_list" class="centerContainer">
         <%if @activity_stats%><!---provider activity stats reports applied-->
		<%= render "user_transactions/email_metric_reports" %>
        <%else%>
		<%= render "transaction_list" %>
        <%end%>
      </div>
    </div>
  </form>
  <div class="clear"></div>
</div>

  <!--ajax loader -->
  <div id='loadingmessage' style='display:none;margin-top:-415px' align="center">
    <%= image_tag("/assets/ajax-loader.gif")%>
  </div>
  <div class="clear"></div>
  <%=stylesheet_link_tag "event_index/event_scroll", :media => "all"%>
  <%=javascript_include_tag "event_index/event_scroll" %>